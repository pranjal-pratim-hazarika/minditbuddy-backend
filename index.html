<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>calmIt</title>

    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap"rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Baloo+Thambi+2&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="form.css">

</head>

<body>

  <!-- <div class="appTitle">
         <h1> Calm <i class="fas fa-bong" style="color:rgb(76, 81, 85)" ></i> It </h1>
  </div> -->
  
  <div class="flex-container">

  <div class="flex1">
  <div class="box-container">
    <div class="card">
      <h1 class="title">Login <i id="lock" class="fas fa-lock" style="float: right;margin-right:1em;font-size:0.8em;"></i> </h1>
      <form> 
        <div class="input-container">
          <input type="text" id="username" required="required"/>
          <label id="">Email</label>
          <div class="bar"></div>
        </div>
        <div class="input-container">
          <input type="password" id="password" required="required"/>
          <label>Password</label>
          <div class="bar"></div>
        </div>
      </form>

      <div class="button-container">
          <button id="loginUser"><span>Go <i id="go" class="fas fa-caret-right"></i></span></button>
      </div>

      <div id="loginStatus"></div>
      <div id="resetPassword">
        Forgot Your Password <i class="fas fa-question-circle" style="margin-left:0.3em;"></i> 
        <button id="" type="button" data-toggle="modal" data-target="#modalLoginForm">Click Here!</button>
      </div>

    </div>

    <!-- ---------------------------Reset Password Section------------------------------------------ -->
    <div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content MDBcontent"> 

          <div id="showResetModal">
          <div class="modal-header text-center">
            <h4 class="modal-title w-100 font-weight-bold" style="color: rgb(116, 117, 117);">Reset Your Password</h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body mx-3">
            <div class="md-form mb-5">
              <i class="fa fa-envelope-open prefix grey-text"></i>
              <input type="email" id="resetEmail" class="form-control validate">
              <label data-error="wrong" data-success="right" for="resetEmail">Your email</label>
              <!-- <input type="text" id="resetEmail" placeholder="Email"> -->
            </div>

          </div>
          <div class="modal-footer d-flex justify-content-center">
            <button class="btn MDBbutton" onclick="resetOtp1()" > GO <i class="fas fa-check show" style="display: none;"></i></button>
          </div>
          <span id="InvalidMsg" style="display: none;"></span>
         </div>
<!-- ----------------------changedModalContent section--------------------------- -->
          <div id="changeModalContent">

      <div class="modal-dialog cascading-modal modal-avatar">
        <div  class="modal-content">
          <div class="modal-header">
            <img src="data:image/png;base64,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" alt="avatar" class="rounded-circle img-responsive" style="height: 130px;object-fit: cover;">
          </div>
          <div class="modal-body text-center mb-1">

            <h6 class="mt-1 mb-2" style="color: darkgray;letter-spacing: 1px;font-size: 0.9em;">
              <i class="fas fa-exclamation-triangle" style="margin-right: 0.3em;color: goldenrod;font-size: 1.1em;"></i>
              Check Your Mail for the OTP
            </h6><br />

            <div class="md-form ml-0 mr-0">
              <span style="font-size: 1.4em;color: rgb(131, 131, 131);margin-left: -6em;">Verification Code</span>
              <input type="text" id="resetOtp" placeholder="Enter Your OTP" style="text-align: center;">
            </div>
            <div class="md-form ml-0 mr-0">
              <input type="password" type="text" id="resetNewPassword" class="form-control form-control-sm ml-0">
              <label data-error="wrong" data-success="right" for="resetNewPassword" class="ml-0">Enter New Password</label>
            </div>

            <div class="text-center mt-4">
              <button  class="btn mt-1" onclick="resetOtp2()"> Reset <i class="fas fa-sign-in ml-1"></i></button>
            </div>
          </div>

        </div>
        <!--do if something required-->
        </div>
    
          </div>
<!-- -----------------------end of chnagedModalContent------------------ -->
        </div>
      </div>
    </div>
    <!-- -------------------end of reset password section---------------------------------------- -->


    <!-- -------------------------Registration Model----------------------------------- -->

    <div class="modal fade" id="modalRegisterForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow-y: scroll !important;">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header text-center">
            <div class="verticalBar1"></div>
            <h4 class="modal-title w-100 font-weight-bold">Registration Form  <i class="fas fa-clipboard-check" style="color: cornflowerblue;opacity: 0.8;"></i> </h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div id="hideModelContent" class="modal-body mx-3">

            <div class="md-form mb-5">
              <i class="fas fa-user prefix grey-text"></i>
              <input type="text" id="orangeForm-name" class="form-control validate">
              <label data-error="wrong" data-success="right" for="orangeForm-name">Your name</label>
            </div>

            <div class="md-form mb-5">
              <i class="fas fa-envelope prefix grey-text"></i>
              <input type="email" id="orangeForm-email" class="form-control validate">
              <label data-error="wrong" data-success="right" for="orangeForm-email">Your email</label>
            </div>

            <div class="md-form mb-4">
              <i class="fas fa-lock prefix grey-text"></i>
              <input type="password" id="orangeForm-pass" class="form-control validate">
              <label data-error="wrong" data-success="right" for="orangeForm-pass">Your password</label>
            </div>

            <!-- --------------radio button--------------------- -->
            <div class="md-form mb-4">
              <div class="verticalBar2"></div>
              <h4 style="margin-top: -1.5em;font-family: 'Roboto', sans-serif;font-weight: 600;">User Type  </h4>
              
                  <div style="display: flex;">
                      <div style="margin-left: 50px;font-family: nunito; flex: 60%;">
                        <!-- Group of default radios - option 1 -->
                        <div class="custom-control custom-radio">
                          <input type="radio" onchange="toggle('proffesionalSection', this)" value="client" class="custom-control-input" id="defaultGroupExample1" name="groupOfDefaultRadios" checked>
                          <label class="custom-control-label" for="defaultGroupExample1">Client</label>
                        </div>

                        <!-- Group of default radios - option 2 -->
                        <div class="custom-control custom-radio">
                          <input type="radio" onchange="toggle('proffesionalSection', this)" value="professional" class="custom-control-input" id="defaultGroupExample2" name="groupOfDefaultRadios">
                          <label class="custom-control-label" for="defaultGroupExample2">Professional</label>
                        </div>
                      </div>
                      <div style="flex: 40%;">
                        <div id="afterUploadBacgroundColor" class="profilePicUpload">
                          <img id="displayImg" src="#" alt="profile-pic"
                            style="height:92px;width:92px;border-radius:50%;object-fit:cover;position:absolute;display:none;" >
                          <input id="profilePic" onchange="PreviewImage()" type="file" accept="image/jpeg, image/png" style="display:none" />
                          <button id="uploadBtn" onclick="fileUpload()" style="background:none;outline:0;border:none;color:#f1f1f1;font-weight:600;">
                            <i class="fas fa-camera" style="color: #fff;"></i> Upload</button>
                          <!-- --------File(image) Upload Script--------- -->
                          <script>
                            function fileUpload() {
                              const link = document.getElementById("profilePic");
                              link.click();
                            }
                            function PreviewImage() {
                              //document.getElementById("uploadBtn").style.zIndex = "999";
                              document.getElementById("displayImg").style.display = "block";
                              document.getElementById("uploadBtn").style.marginLeft = "12em";
                              document.getElementById("uploadBtn").style.color = "cornflowerblue";

                              const innerData = '<i class="fas fa-pen"></i>' + 'Edit';
                              document.getElementById("uploadBtn").innerHTML = innerData;
                              document.getElementById("afterUploadBacgroundColor").classList.add("addClassBackgroundColor");

                              const oFReader = new FileReader();
                              oFReader.readAsDataURL(document.getElementById("profilePic").files[0]);

                              oFReader.onload = function (oFREvent) {
                                  document.getElementById("displayImg").src = oFREvent.target.result;
                              };
                            };
                          </script>
                          <!-- ----------end of Script------------ -->
                        </div>
                      </div>
                  </div>

            </div>
            <!-- ------------------end of radioButton------------ -->

            <div id="proffesionalSection">

              <div class="md-form mb-2">
                <i class="fab fa-hubspot prefix grey-text"></i>
                <input type="text" id="orangeForm-qualification" class="form-control validate">
                <label data-error="wrong" data-success="right" for="orangeForm-qualification">Qualification</label>
              </div>

              <div class="md-form mb-2">
                <i class="fab fa-hubspot prefix grey-text"></i>
                <input type="text" id="orangeForm-occupation" class="form-control validate">
                <label data-error="wrong" data-success="right" for="orangeForm-occupation">Occupation</label>
              </div>

              <div class="md-form mb-2">
                <i class="fab fa-hubspot prefix grey-text"></i>
                <input type="text" id="orangeForm-purpose" class="form-control validate">
                <label data-error="wrong" data-success="right" for="orangeForm-purpose">Purpose</label>
              </div>
  
            </div>

          </div>
          <div id="test" class="modal-footer d-flex justify-content-center">
            <button id="registerUser" class="btn regBtn">Register &nbsp <i class="fas fa-check-circle"></i> </button>
          </div>
          <div id="content-heading" style="display: none;text-align: center; font-family: nunito;margin-bottom: 1.5em;"></div> <br />

          <!-- ---------------------OTP Container------------------------- -->
          <div id="content" style="margin-bottom: 2vh;display: none;">

              <div class="otp-container">
                <h3>Verification Code</h3>
                <div class="otp-content">
                    <input type="text" id="code" placeholder="Enter Your OTP" onfocus="otpFocus(this)">
                </div>
              </div>
              <div class="otp-button">
                <button type="button" id="VerificationBtn" onclick="otpButtonAction()">Complete Registration</button>
              </div>
              <div id="errorAlert" style="display: none;color: crimson;font-size: 0.8em;"></div>
              <div class="otp-svg">
                <img src="./svg/complete.svg" style="opacity: 0.4;width: 250px">
              </div>

          </div>
          <!-- -----------------end of OTP container--------------------- -->
        </div>
      </div>
    </div>

    <!-- <div class="text-center">
      <a href="" class="btn btn-primary btn-rounded mb-4" data-toggle="modal" data-target="#modalRegisterForm"> Register Now! </a>
    </div> -->

    <!-- ---------------end of model-------------------------------------- -->

    </div>
   </div>
   <div class="flex2">
      <div class="appTitle">
        <h1> Calm <i class="fas fa-bong" style="color:rgb(76, 81, 85)" ></i> It </h1>
      </div>

      <div style="border: 1px solid #fff; height: 300px;">
        <span>Edit Here!</span>
      </div>

      <div class="text-center">
        <a href="" class="btn btn-primary btn-rounded mb-4" data-toggle="modal" data-target="#modalRegisterForm"> Register Now! </a>
      </div>
   </div>
  </div>

<!-- ----------------------------------------------------------------- -->
<script>
  var rType = "client";
  
    function toggle(proffesionalSection, element) {
     rType = element.value;
      document.getElementById(proffesionalSection).style.display = element.value == "professional" ? 'block' : 'none';
    }

    // ----------------Login Section-------------------------------
    document.getElementById("loginUser").addEventListener("click", function() {

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://minditbuddy.herokuapp.com/api/v1/login", true);
    xhr.setRequestHeader("Content-Type", "application/json");
    
    xhr.onreadystatechange = function() {
         if (this.readyState == 4 && this.status == 200) {
         //console.log(xhr.responseText);
        //  ----------Re-directing---------------
          var resToken = JSON.parse(xhr.responseText);
          var token = resToken.token;
          var userType = resToken.user_type
          var saveEmail = document.getElementById("username").value; 
          // ------------Token Stored in Session Storage-----
          sessionStorage.setItem('myUniqueUserToken',
            JSON.stringify(`${token}`)
          );
          sessionStorage.setItem('myUniqueEmail',
            JSON.stringify(`${saveEmail}`)
          );
          sessionStorage.setItem('myUniqueUserType',
            JSON.stringify(`${userType}`)
          );
          // ------------------End Storing-------------------

          if(token != "") {
           // document.location.href = "dashboard.html";
           if(userType == "client"){
             document.location.href = "dashboard.html";
           }
           else if(userType == "professional"){
             document.location.href = "dashboard.html";
           }
           else if(userType == "staff"){
             document.location.href = "adminDashboard.html";
           }
          }
        //  -------------End Directing------------
       }
       else if(this.status == 400) {
         document.getElementById("loginStatus").innerHTML = '<i class="fas fa-user-lock"></i> Username/Password Not Provided';
       }
       else if(this.status == 401) {
         document.getElementById("loginStatus").innerHTML = '<i class="fas fa-key"></i> Password is Not Valid';
       }
       else if(this.status == 404) {
         document.getElementById("loginStatus").innerHTML = '<i class="fas fa-user-circle"></i> User Not Found';
       }
     }
    var uEmail = document.getElementById("username").value;
    var uPass = document.getElementById("password").value;
    data = JSON.stringify({
             email: `${uEmail}`,
             password: `${uPass}`
            });
          xhr.send(data);
        },
        false
    );
// -------------------end of Login-----------------------------------


// -----------------------Registration Section------------------------
    document.getElementById("registerUser").addEventListener("click", function() {

      document.getElementById("registerUser").innerHTML = "Registering...";

    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://minditbuddy.herokuapp.com/api/v1/signup", true);
    xhr.setRequestHeader("Content-Type", "application/json");

    xhr.onreadystatechange = function() {
      //******* for POST status code is 201 *******
        if (this.status == 201) {
        //  ----------Re-directing---------------      
           // document.location.href = "dashboard.html";  
           document.getElementById("content").style.display = "block";
           document.getElementById("hideModelContent").style.display = "none";
           document.getElementById("registerUser").style.display = "none";
           document.getElementById("content-heading").style.display = "block";
           document.getElementById("content-heading").innerHTML = '<i class="fas fa-exclamation-triangle" style="color: gold"></i> Check Your Email For The Code <a href="http://gmail.com" target="_blank" >Click Here!</a>';
        //  -------------End Directing------------
      }
     
    }
    var rName = document.getElementById("orangeForm-name").value;
    var rEmail = document.getElementById("orangeForm-email").value;
    var rPass = document.getElementById("orangeForm-pass").value;
    // ******for (User_Type) !!!!!!!!!we have accessed the value on top at variable 'rType' !!!!!!! *******
    var rQualification = document.getElementById("orangeForm-qualification").value;
    var rOccupation = document.getElementById("orangeForm-occupation").value;
    var rPurpose = document.getElementById("orangeForm-purpose").value;
   
    if(rType == "client") {
      data = JSON.stringify({
            name: `${rName}`,
            email: `${rEmail}`,
            password: `${rPass}`,
            user_type: `${rType}`,
            });
    }
    else if(rType == "professional") {
      data = JSON.stringify({
            name: `${rName}`,
            email: `${rEmail}`,
            password: `${rPass}`,
            user_type: `${rType}`,
            occupation: `${rQualification}`,
            purpose: `${rOccupation}`,
            qualification: `${rPurpose}`
            });
    }

          xhr.send(data);
        },
        false
    );

// ----------------end of Registration--------------------------------  

// ---------------------OTP Section------------------------------------------
function otpButtonAction() {
        document.getElementById("VerificationBtn").innerHTML = "Verifying...";
        let OTP = document.getElementById("code").value;
        if(OTP != "") {
            //call API
            let regEmail = document.getElementById("orangeForm-email").value;
            let url = "https://minditbuddy.herokuapp.com/api/v1/verify";
            var xhr = new XMLHttpRequest();
            xhr.open("POST", url);
            xhr.setRequestHeader("Content-Type", "application/json");
              data = JSON.stringify({
              email: `${regEmail}`,
              otp: `${OTP}`
              });
            xhr.send(data);

            xhr.onreadystatechange = function() {
                if (this.status == 200) {
                  document.getElementById("content-heading").style.display = "none";
                  let e = document.getElementById("content");
                  e.innerHTML = "Successfully Registered!";
                  e.style.padding = "50px";
                  e.style.textAlign = "center";
                  e.style.fontWeight = "500";
                  e.style.fontSize = "2em";
                  e.style.color = "#1984cc";
                  // window.setTimeout(function(){
                  //     window.location.href = "form.html";
                  //     }, 3000);  
                }
                else if(this.status == 401) {
                  document.getElementById("errorAlert").style.display = "block";
                  document.getElementById("code").value = "Incorrect OTP!";
                  document.getElementById("code").style.color = "crimson";
                  document.getElementById("code").style.border = "1px solid crimson";
                  document.getElementById("VerificationBtn").innerHTML = "Retry!";
                }
            }
        }    
      }
      function otpFocus(e) {
        e.value = "";
        e.style.border = "1px solid rgb(155, 155, 155)";
        e.style.color = "rgb(196, 196, 196)";
      }
// ------------------------------end of OTP --------------------------------

// -------------Reset password Section------------------------
function resetOtp1() {
              let email = document.getElementById("resetEmail").value;
              sessionStorage.setItem('myResetEmail',
                JSON.stringify(`${email}`));

              var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                  if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("showResetModal").style.display = "none";
                    document.getElementById("changeModalContent").style.display = "block";
                  }
                  else if (this.readyState == 4 && this.status == 401) {
                    let e = document.getElementById("InvalidMsg");
                    e.style.display = "block";
                    e.innerHTML = "Invalid Email Address!";
                    e.style.padding = "30px";
                    e.style.textAlign = "center";
                    e.style.letterSpacing = "1px";
                    e.style.fontWeight = "500";
                    e.style.color = "crimson";
                    // window.setTimeout(function(){
                    //   window.location.href = "form.html";
                    //   }, 3000);
                  }
                };
                xhttp.open("POST", "https://minditbuddy.herokuapp.com/api/v1/resetPassword", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                data = JSON.stringify({
                      email: `${email}`,
                      });
                xhttp.send(data);
            }

 function resetOtp2() {
            let email = JSON.parse(sessionStorage.getItem('myResetEmail'));
              let newOtp = document.getElementById("resetOtp").value;
              let newPassword = document.getElementById("resetNewPassword").value;
              var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                  if (this.readyState == 4 && this.status == 200) {
                    alert("changed Successfully!");
                  }
                };
                xhttp.open("POST", "https://minditbuddy.herokuapp.com/api/v1/resetPassword", true);
                xhttp.setRequestHeader("Content-type", "application/json");
                data = JSON.stringify({
                      email: `${email}`,
                      otp: `${newOtp}`,
                      newPassword: `${newPassword}`,
                      });
                xhttp.send(data);
            } 
// --------------end of reset passsword-----------------------

  </script>
<!-- ------------------------------end of 1st </SCRIPT>--------------------------------- -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  $(document).ready(function(){
                $('.button-container').hover(function(e){
                     $("#lock").toggleClass("fa-unlock");
                    // e.stopPropagation();
                     e.preventDefault();
                })
            })
</script>

</body>



<!-- JQuery -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/js/mdb.min.js"></script>

</html>